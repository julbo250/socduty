J'ai crÃ©Ã© pour vous une application web complÃ¨te de gestion d'astreintes SOC avec les fonctionnalitÃ©s suivantes :

ğŸ“Š Tableau de bord

Statistiques en temps rÃ©el (astreintes totales, Ã  venir, incidents)
Visualisation de l'astreinte en cours
Indicateurs visuels colorÃ©s

ğŸ“… Gestion des Astreintes

CrÃ©ation d'astreintes avec dates de dÃ©but/fin
Types d'astreintes (normale, week-end, fÃ©riÃ©, nuit)
Statuts automatiques (en cours, Ã  venir, terminÃ©e)
Notes personnalisables

ğŸš¨ Gestion des Incidents

DÃ©claration d'incidents avec niveaux de sÃ©vÃ©ritÃ© (critique, haute, moyenne, basse)
Association aux astreintes
Suivi de rÃ©solution
Historique complet

ğŸ’¾ Persistance des donnÃ©es
L'application utilise le localStorage du navigateur pour sauvegarder automatiquement toutes vos donnÃ©es.
ğŸ¨ Interface moderne

Design responsive et intuitif
Codes couleurs pour une lecture rapide
Navigation par onglets

ğŸ Calcul automatique des jours de rÃ©cupÃ©ration

1,5 jours de rÃ©cupÃ©ration par semaine d'astreinte
+0,5 jour supplÃ©mentaire si un jour fÃ©riÃ© est inclus (case Ã  cocher)
Calcul automatique basÃ© sur la durÃ©e de l'astreinte

ğŸ“Š Nouvelle carte statistique

Affichage du total cumulÃ© de tous vos jours de rÃ©cupÃ©ration dans le tableau de bord

âœ… Case Ã  cocher

Une case "Inclut un jour fÃ©riÃ©" lors de la crÃ©ation d'une nouvelle astreinte
Le bonus de 0,5 jour est automatiquement ajoutÃ© si cochÃ©e

ğŸ‘ï¸ Affichage des rÃ©cupÃ©rations

Le nombre de jours de rÃ©cupÃ©ration est affichÃ© pour chaque astreinte
Indication visuelle si un jour fÃ©riÃ© est inclus
Visible dans le tableau de bord et la liste des astreintes

Par exemple, une astreinte d'une semaine normale = 1,5 jours de rÃ©cupÃ©ration, et si vous cochez la case jour fÃ©riÃ©, vous obtenez 2,0 jours de rÃ©cupÃ©ration au total !

ğŸ–ï¸ Nouvel onglet "RÃ©cupÃ©ration"

Tableau de bord avec 3 compteurs :

Total acquis : tous vos jours de rÃ©cupÃ©ration gagnÃ©s
Jours pris : ce que vous avez dÃ©jÃ  utilisÃ©
Disponibles : ce qui vous reste



â• DÃ©claration des jours pris

Formulaire pour enregistrer vos prises de rÃ©cupÃ©ration
Date de dÃ©but et fin
Nombre de jours (accepte les demi-journÃ©es : 0.5, 1.5, etc.)
Champ notes optionnel
Validation automatique : impossible de dÃ©clarer plus de jours que disponibles

ğŸ“Š Mise Ã  jour automatique

Le tableau de bord affiche maintenant les "Jours disponibles" au lieu du total
Tous les compteurs se mettent Ã  jour automatiquement
Historique complet de vos prises de rÃ©cupÃ©ration

ğŸ—‘ï¸ Gestion complÃ¨te

PossibilitÃ© de supprimer une dÃ©claration si erreur
Les compteurs se recalculent instantanÃ©ment

â±ï¸ Champ "Heures passÃ©es" dans le formulaire d'incident

Champ numÃ©rique acceptant les demi-heures (0.5, 1.5, 2.5, etc.)
Description explicative pour guider l'utilisateur
Champ optionnel mais trÃ¨s utile pour le suivi

ğŸ“Š Affichage du temps passÃ©

Les heures sont affichÃ©es clairement sur chaque incident avec l'icÃ´ne â±ï¸
Format lisible : "2 heures" ou "1 heure"
Mise en Ã©vidence avec une couleur distincte

ğŸ“ˆ Nouvelle statistique dans le tableau de bord

Carte "Heures sur incidents" qui totalise automatiquement toutes les heures passÃ©es
Couleur orange pour bien se distinguer des autres mÃ©triques
Mise Ã  jour en temps rÃ©el

ğŸ“¥ Export en 2 formats

JSON (sauvegarde complÃ¨te)

Conserve toutes les donnÃ©es avec leur structure
Parfait pour les sauvegardes et la restauration
Inclut : astreintes, incidents, rÃ©cupÃ©rations prises
Nom du fichier : astreintes-soc-export-YYYY-MM-DD.json


CSV (pour Excel)

Format tabulaire compatible Excel/LibreOffice
SÃ©pare les donnÃ©es en 3 sections : astreintes, incidents, rÃ©cupÃ©rations
Encodage UTF-8 avec BOM pour la compatibilitÃ©
Nom du fichier : astreintes-soc-export-YYYY-MM-DD.csv

ğŸ“¤ Import de donnÃ©es

Importe les fichiers JSON exportÃ©s prÃ©cÃ©demment
Affiche un rÃ©capitulatif avant confirmation
VÃ©rifie la validitÃ© du format
Met Ã  jour automatiquement toute l'interface
Protection contre les imports accidentels

ğŸ¯ Interface intuitive

Boutons dans le header toujours accessibles
Menu contextuel pour choisir le format d'export
Messages de confirmation clairs
Gestion d'erreurs robuste

Les donnÃ©es sont stockÃ©es dans le localStorage du navigateur. Voici les dÃ©tails techniques :
ğŸ“ Emplacement du stockage
Les donnÃ©es sont sauvegardÃ©es dans 3 clÃ©s localStorage :

astreintes - toutes vos astreintes planifiÃ©es
incidents - tous les incidents dÃ©clarÃ©s
recuperationsPrises - tous les jours de rÃ©cupÃ©ration pris

ğŸ” Comment accÃ©der aux donnÃ©es
Vous pouvez visualiser ces donnÃ©es directement dans votre navigateur :
Chrome / Edge / Brave :

Appuyez sur F12 pour ouvrir les outils dÃ©veloppeur
Allez dans l'onglet Application
Dans le menu de gauche : Storage â†’ Local Storage
Cliquez sur l'URL de votre page
Vous verrez les 3 clÃ©s avec toutes vos donnÃ©es en JSON

Firefox :

Appuyez sur F12
Allez dans l'onglet Stockage
Stockage local â†’ sÃ©lectionnez l'URL
Vous verrez vos donnÃ©es

Safari :

Activez le menu dÃ©veloppeur dans les prÃ©fÃ©rences
DÃ©veloppement â†’ Afficher l'inspecteur Web
Onglet Stockage â†’ Stockage local

âš ï¸ Points importants Ã  savoir
Avantages :

âœ… DonnÃ©es persistantes (restent aprÃ¨s fermeture du navigateur)
âœ… Rapide et accessible hors ligne
âœ… Pas besoin de compte ou de serveur

Limitations :

âš ï¸ DonnÃ©es spÃ©cifiques Ã  ce navigateur sur cet ordinateur
âš ï¸ Si vous videz le cache/cookies, les donnÃ©es sont perdues
âš ï¸ Limite de ~5-10 MB selon le navigateur
âš ï¸ DonnÃ©es non synchronisÃ©es entre appareils

ğŸ’¡ Recommandations

Exportez rÃ©guliÃ¨rement vos donnÃ©es (bouton "Exporter les donnÃ©es")
Conservez une sauvegarde JSON sur votre ordinateur ou cloud
Ne videz pas les donnÃ©es du site dans les paramÃ¨tres du navigateur
Si vous changez d'ordinateur, utilisez la fonction Import pour restaurer vos donnÃ©es

Parfait ! J'ai ajoutÃ© un systÃ¨me complet de sauvegarde automatique avec les fonctionnalitÃ©s suivantes :
ğŸ’¾ Nouveau menu ParamÃ¨tres

âš™ï¸ Activation/dÃ©sactivation

    Case Ã  cocher pour activer la sauvegarde automatique
    Indicateur visuel dans le header quand activÃ© (point vert)

ğŸ“… FrÃ©quence personnalisable

    Quotidienne : sauvegarde tous les jours
    Hebdomadaire : sauvegarde toutes les semaines (par dÃ©faut)
    Mensuelle : sauvegarde tous les 30 jours

ğŸ“Š Informations de sauvegarde

    Affichage de la date et heure de la derniÃ¨re sauvegarde
    VÃ©rification automatique au chargement de la page

ğŸ”„ FonctionnalitÃ©s de sauvegarde

Sauvegarde automatique

    Se dÃ©clenche automatiquement selon la frÃ©quence choisie
    Sauvegarde dans le localStorage du navigateur
    PremiÃ¨re sauvegarde immÃ©diate lors de l'activation
    VÃ©rification Ã  chaque visite de l'application

ğŸ’¾ Sauvegarde manuelle

    Bouton "Sauvegarder maintenant"
    CrÃ©e une copie locale ET tÃ©lÃ©charge un fichier JSON
    Peut Ãªtre utilisÃ©e Ã  tout moment

ğŸ”„ Restauration

    Bouton "Restaurer la sauvegarde auto"
    Permet de revenir Ã  la derniÃ¨re sauvegarde automatique
    Utile en cas de suppression accidentelle
    Demande confirmation avant Ã©crasement

ğŸ¯ Comment Ã§a fonctionne

    Cliquez sur âš™ï¸ ParamÃ¨tres
    Cochez "Activer la sauvegarde automatique"
    Choisissez votre frÃ©quence
    L'application sauvegardera automatiquement vos donnÃ©es !

Un indicateur vert apparaÃ®t dans le header pour vous rappeler que la sauvegarde auto est active ğŸŸ¢

Vos donnÃ©es sont maintenant doublement protÃ©gÃ©es : sauvegarde automatique locale + possibilitÃ© d'export manuel !

ğŸ“‹ Nouvelles informations requises
ğŸ‘¤ Nom de l'analyste (obligatoire)

Champ texte pour identifier qui a traitÃ© l'incident

ğŸ“… Date et horaires

Date de l'incident (obligatoire)
Heure de dÃ©but (obligatoire)
Heure de fin (optionnelle)

â±ï¸ Calcul automatique avec majoration 30%

Le temps est calculÃ© automatiquement entre dÃ©but et fin
Majoration de 30% appliquÃ©e automatiquement
Modifiable manuellement si besoin d'ajuster
GÃ¨re les incidents qui passent minuit

ğŸ” SÃ©vÃ©ritÃ© enrichie

Critique
Haute
Moyenne
Basse
Faux-positif (nouveau)

ğŸ“ Descriptions amÃ©liorÃ©es

"Description et dÃ©tails des opÃ©rations menÃ©es" - pour documenter les actions
"ProblÃ¨mes rencontrÃ©s / Retex" - pour le retour d'expÃ©rience

ğŸ“¢ Communication structurÃ©e
Zone dÃ©diÃ©e avec cases Ã  cocher :

âœ… Cadre d'astreinte
âœ… DSI
âœ… RSSI
âœ… ANSSI
âœ… SHFDS
âœ… SOC RIE
âœ… SOC
âœ… RENATER
âœ… Autre (avec champ de saisie libre qui s'active)

ğŸ“Š Affichage enrichi
Chaque incident affiche maintenant :

Carte avec l'analyste, date, horaires
Temps passÃ© avec majoration
Descriptions dans des zones colorÃ©es
Communications effectuÃ©es listÃ©es
Tout est exportable en CSV avec tous les dÃ©tails !

âœ… Changements effectuÃ©s
Avant : Champs datetime-local (date + heure)
Maintenant : Champs date simples (date uniquement)
BÃ©nÃ©fices :

âœ… Interface plus simple et Ã©purÃ©e
âœ… Plus rapide Ã  remplir
âœ… Pas de confusion avec les heures
âœ… Meilleure compatibilitÃ© entre navigateurs

â±ï¸ Nouveau bouton "RÃ©cupÃ©rer des heures"
Dans l'onglet ğŸ–ï¸ RÃ©cupÃ©ration, vous avez maintenant deux boutons :

â• DÃ©clarer des jours pris (pour les jours de rÃ©cupÃ©ration)
â±ï¸ RÃ©cupÃ©rer des heures (nouveau !)

ğŸ“‹ Formulaire de rÃ©cupÃ©ration d'heures
Quand vous cliquez sur "RÃ©cupÃ©rer des heures", un formulaire s'affiche avec :

Date de rÃ©cupÃ©ration *
Nombre d'heures Ã  rÃ©cupÃ©rer * (avec demi-heures : 0.5, 1.5, etc.)
Notes (optionnel)

ğŸ”¢ Calcul automatique
Le compteur "Heures sur incidents" (dans le tableau de bord) est maintenant calculÃ© ainsi :

Total heures incidents - Heures rÃ©cupÃ©rÃ©es = Heures restantes

Exemple :

Total heures sur incidents : 15h
Heures rÃ©cupÃ©rÃ©es : 3h
Affichage : 12h (heures sur incidents)

âœ… Validation
Le systÃ¨me vÃ©rifie que vous ne rÃ©cupÃ©rez pas plus d'heures que disponibles. Si vous tentez de rÃ©cupÃ©rer 10h alors qu'il n'en reste que 5h, un message d'erreur s'affiche.
ğŸ“Š Affichage
Les heures rÃ©cupÃ©rÃ©es s'affichent dans l'onglet RÃ©cupÃ©ration avec :

Badge bleu â±ï¸ RÃ©cupÃ©rÃ©es
Date de rÃ©cupÃ©ration
Nombre d'heures
Notes
PossibilitÃ© de supprimer

âœ… 1. Majoration corrigÃ©e Ã  25%
Ancienne formule : durÃ©e Ã— 1,30 (majoration 30%)
Nouvelle formule : durÃ©e Ã— 1,25 (majoration 25%)
â° 2. Format horaire au lieu de dÃ©cimal
Avant : Format numÃ©rique (ex: 1.3, 2.5)
Maintenant : Format horaire (ex: 1h18, 2h30)
Exemples de calcul :
Intervention de 30 minutes :

Forfait : 1h00 (pas de majoration si < 1h)

Intervention de 1 heure :

1h Ã— 1,25 = 1h15

Intervention de 2 heures :

2h Ã— 1,25 = 2h30

Intervention de 1h30 :

90 min Ã— 1,25 = 112,5 min = 1h53

Affichage dans l'application :

â±ï¸ Champ de saisie : Format XhYY (ex: 2h30)
ğŸ“Š Carte statistique : "Heures sur incidents" en format XhYY
ğŸ“‹ Liste des incidents : Temps affichÃ© en format XhYY avec mention "avec majoration 25%"

CompatibilitÃ© :

Le champ accepte aussi une saisie manuelle au format XhYY
Les donnÃ©es sont stockÃ©es en dÃ©cimal pour les calculs internes
Les anciens incidents (format dÃ©cimal) sont automatiquement convertis Ã  l'affichage

ğŸ« Nouveau champ "Ticket GLPI (ID)"
ğŸ“ Dans le formulaire :

PositionnÃ© juste aprÃ¨s "Nom de l'analyste"
Champ texte pour saisir le numÃ©ro du ticket
Optionnel (pas obligatoire)
Texte d'aide : "NumÃ©ro du ticket GLPI associÃ© Ã  cet incident"

ğŸ”— Lien cliquable dans l'affichage
Dans la liste des incidents :

Si un ticket GLPI est renseignÃ©, il s'affiche comme :

ğŸ« Ticket GLPI: #12345 ğŸ”—
Le lien pointe vers : https://tiksoc.corporate.fr/front/ticket.form.php?id=12345
S'ouvre dans un nouvel onglet (target="_blank")
Style : texte bleu cliquable, en gras

Exemple d'affichage :
ğŸ‘¤ Analyste: Jean Dupont
ğŸ« Ticket GLPI: #12345 ğŸ”— (cliquable)
ğŸ“… Date incident: lundi 10 fÃ©vrier 2026

ğŸ“„ IntÃ©gration complÃ¨te
âœ… Export PDF : Le numÃ©ro de ticket GLPI est inclus dans le PDF
âœ… Export CSV : Nouvelle colonne "Ticket GLPI" dans l'export
âœ… Sauvegarde : EnregistrÃ© dans le localStorage et les exports JSON
Si aucun ticket n'est renseignÃ©, la ligne n'apparaÃ®t simplement pas dans l'affichage (pas de ligne vide).

# v1.17
#11/02/2026

ğŸ“¥ Export Astreintes
Onglet "Mes Astreintes" :

Nouveau bouton ğŸ“¥ Exporter les astreintes (CSV)
PositionnÃ© en haut de la liste, au-dessus des astreintes

Contenu du fichier CSV :

Nom de l'astreinte
Date de dÃ©but (format franÃ§ais)
Date de fin (format franÃ§ais)
Type d'astreinte
Nombre de jours fÃ©riÃ©s
Jours de rÃ©cupÃ©ration calculÃ©s
Notes

Nom du fichier : astreintes-YYYY-MM-DD.csv
ğŸ“¥ Export Jours de RÃ©cupÃ©ration
Onglet "ğŸ–ï¸ RÃ©cupÃ©ration" :

Nouveau bouton ğŸ“¥ Exporter les jours (style bleu)
PositionnÃ© avec les autres boutons d'action

Contenu du fichier CSV :

Date de dÃ©but (format franÃ§ais)
Date de fin (format franÃ§ais)
Nombre de jours
Notes
Date d'enregistrement

Nom du fichier : jours-recuperation-YYYY-MM-DD.csv
âš ï¸ Important : Seuls les jours de rÃ©cupÃ©ration pris sont exportÃ©s, pas les heures rÃ©cupÃ©rÃ©es (comme demandÃ©).
âœ¨ FonctionnalitÃ©s
âœ… Tri chronologique des donnÃ©es exportÃ©es
âœ… Encodage UTF-8 avec BOM pour Excel
âœ… Dates au format franÃ§ais (jj/mm/aaaa)
âœ… Guillemets Ã©chappÃ©s dans les notes
âœ… TÃ©lÃ©chargement instantanÃ©
âœ… Message de confirmation aprÃ¨s export

âš™ï¸ Nouvelle section dans les ParamÃ¨tres
ğŸ“ Localisation : Header â†’ âš™ï¸ ParamÃ¨tres â†’ Section "ğŸ”— Configuration ITSM"
ğŸ”§ FonctionnalitÃ©s :

Champ de configuration

Label : "URL de base pour les tickets GLPI"
Valeur par dÃ©faut : https://tiksoc.corporate.fr/front/ticket.form.php?id=
Placeholder affiche la valeur par dÃ©faut
Champ de texte complet modifiable


Validation

VÃ©rifie que l'URL commence par http:// ou https://
VÃ©rifie que le champ n'est pas vide
Message d'erreur si validation Ã©choue


Sauvegarde

Bouton "ğŸ’¾ Enregistrer l'URL"
Sauvegarde dans le localStorage
Message de confirmation "âœ… URL ITSM enregistrÃ©e avec succÃ¨s !"
La nouvelle URL est utilisÃ©e immÃ©diatement


Utilisation

L'URL configurÃ©e est utilisÃ©e pour tous les liens vers les tickets GLPI
Format du lien : [URL_configurÃ©e] + [numÃ©ro_ticket]
Exemple : https://tiksoc.corporate.fr/front/ticket.form.php?id=12345



ğŸ’¡ Comment Ã§a marche ?
Pour l'utilisateur :

Ouvrir les ParamÃ¨tres (âš™ï¸)
Modifier l'URL si besoin (par exemple pour un autre ITSM)
Cliquer sur "ğŸ’¾ Enregistrer l'URL"
Tous les liens vers les tickets GLPI utiliseront cette nouvelle URL

Exemples d'utilisation :

URL par dÃ©faut : https://tiksoc.corporate.fr/front/ticket.form.php?id=
URL alternative : https://autreitsm.exemple.fr/tickets?id=
URL personnalisÃ©e : https://votre-glpi.com/front/ticket.form.php?id=

La configuration est persistante et survit aux rechargements de la page !

ğŸ“… Nouveau champ : Date limite de rÃ©cupÃ©ration
ğŸ“ Dans le formulaire "Nouvelle Astreinte"
Position : AprÃ¨s le champ "Notes", avant le bouton "Enregistrer"
CaractÃ©ristiques :

Champ de type date en lecture seule (grisÃ©)
IcÃ´ne : â°
Texte d'aide : "CalculÃ©e automatiquement : date de dÃ©but + 1 an"
Non modifiable manuellement (calculÃ© automatiquement)

âš™ï¸ Calcul automatique
DÃ¨s que l'utilisateur sÃ©lectionne une Date de dÃ©but, la date limite est calculÃ©e :
Exemples :

Date de dÃ©but : 02/05/2026 â†’ Date limite : 02/05/2027
Date de dÃ©but : 15/01/2026 â†’ Date limite : 15/01/2027
Date de dÃ©but : 29/02/2024 (annÃ©e bissextile) â†’ Date limite : 28/02/2025

ğŸ‘ï¸ Affichage
1. Tableau de bord (astreinte en cours) :
ğŸ“… DÃ©but: lundi 5 mai 2026
ğŸ Fin: lundi 12 mai 2026
ğŸ·ï¸ Type: normale
ğŸ RÃ©cupÃ©ration: 1,5 jours
â° Date limite rÃ©cup: lundi 5 mai 2027  â† NOUVEAU
ğŸš¨ Incidents: 2 (1 en cours)

2. Liste "Mes Astreintes" :
MÃªme affichage avec la date limite visible pour chaque astreinte
3. Export CSV :

Nouvelle colonne "Date Limite RÃ©cup" ajoutÃ©e
PrÃ©sente dans l'export complet ET l'export spÃ©cifique des astreintes
Format de date franÃ§ais (jj/mm/aaaa)

ğŸ’¾ Sauvegarde

La date limite est enregistrÃ©e dans le localStorage
Compatible avec les imports/exports JSON
RÃ©trocompatible : les anciennes astreintes sans date limite s'afficheront correctement

ğŸ”„ Comportement

Si l'utilisateur change la date de dÃ©but, la date limite se recalcule automatiquement
Le champ est rÃ©initialisÃ© quand le formulaire est soumis
Si pas de date limite (anciennes astreintes), la ligne ne s'affiche pas

ğŸ“Š Nouveau calcul de rÃ©cupÃ©ration par type
Formule mise Ã  jour :
Base (selon le type) + Bonus jours fÃ©riÃ©s

Type d'astreinte	Base		+ 1 jour fÃ©riÃ©		+ 2 jours fÃ©riÃ©s
Normale			1,5 		jours2,0 		jours2,5 jours	
Week-end		1,0 jour	1,5 jours		2,0 jours
Nuit			0,5 jour	1,0 jour		1,5 jours

ğŸ’¡ Exemples concrets :
Astreinte Normale :

Sans jour fÃ©riÃ© : 1,5 jours
Avec 1 jour fÃ©riÃ© : 1,5 + 0,5 = 2,0 jours
Avec 2 jours fÃ©riÃ©s : 1,5 + 1,0 = 2,5 jours

Astreinte Week-end :

Sans jour fÃ©riÃ© : 1,0 jour
Avec 1 jour fÃ©riÃ© : 1,0 + 0,5 = 1,5 jours
Avec 2 jours fÃ©riÃ©s : 1,0 + 1,0 = 2,0 jours

Astreinte Nuit :

Sans jour fÃ©riÃ© : 0,5 jour
Avec 1 jour fÃ©riÃ© : 0,5 + 0,5 = 1,0 jour
Avec 2 jours fÃ©riÃ©s : 0,5 + 1,0 = 1,5 jours

ğŸ¨ Interface amÃ©liorÃ©e
Le sÃ©lecteur de type affiche maintenant directement les jours de rÃ©cupÃ©ration :

âœ… Normale (1,5 jours de rÃ©cupÃ©ration)
âœ… Week-end (1 jour de rÃ©cupÃ©ration)
âœ… Nuit (0,5 jour de rÃ©cupÃ©ration)

âœ¨ FonctionnalitÃ©s

âœ… Calcul automatique dÃ¨s la sÃ©lection du type
âœ… Affichage mis Ã  jour dans le tableau de bord
âœ… Affichage mis Ã  jour dans la liste des astreintes
âœ… Compteur "Total acquis" et "Disponibles" recalculÃ© correctement
âœ… Export CSV avec les bonnes valeurs
âœ… RÃ©trocompatible avec les anciennes astreintes

ğŸš€ Fonctionnement MANUEL (sans automatisme)
Bouton "ğŸ”” VÃ©rifier alertes" dans l'onglet RÃ©cupÃ©ration :

Clique sur ce bouton quand vous voulez vÃ©rifier
VÃ©rifie toutes les dates limites
Affiche les notifications pour celles qui sont proches

ğŸ’¡ Avantages de cette approche
âœ… Aucun automatisme - Pas de vÃ©rification au chargement
âœ… ContrÃ´le total - Vous dÃ©cidez quand vÃ©rifier
âœ… Pas de bug - Code simple et robuste
âœ… Compatible Firefox - TestÃ© pour Firefox
âœ… LÃ©ger - Aucun impact sur les performances
ğŸ“± Exemple d'utilisation
ScÃ©nario :

1. Vous ouvrez l'application
2. Allez dans ParamÃ¨tres
3. Activez "Activer les alertes" (permission demandÃ©e)
4. Fermez les paramÃ¨tres
5. Allez dans ğŸ–ï¸ RÃ©cupÃ©ration
6. Cliquez sur ğŸ”” VÃ©rifier alertes
7. Si une date limite approche â†’ notification s'affiche !

ğŸ”” Notification affichÃ©e
âš ï¸ Date limite proche !

Astreinte "Semaine 6"
1,5 jour(s) Ã  utiliser avant le 15/02/2027
(25 jour(s) restant(s))

âœ¨ Points clÃ©s

ğŸ¯ Simple et efficace
ğŸ–±ï¸ DÃ©clenchement manuel (bouton)
ğŸ”§ Aucune interfÃ©rence avec l'application
ğŸš« Aucune vÃ©rification automatique au chargement
âœ… Fonctionne parfaitement sur Firefox

ğŸ“Š Modification implÃ©mentÃ©e
Changements apportÃ©s :
1. Nouveau calcul du compteur

Avant : "Astreintes totales" = toutes les astreintes (passÃ©es + en cours + futures)
Maintenant : "Astreintes terminÃ©es" = uniquement les astreintes dont la date de fin est passÃ©e

2. Nouveau libellÃ©

Le compteur s'appelle maintenant "Astreintes terminÃ©es" au lieu de "Astreintes totales"
Plus prÃ©cis et plus clair

Impact sur le tableau de bord :
Les 6 cartes affichent maintenant :

1. Astreintes terminÃ©es â† Nouveau calcul
2. Ã€ venir
3. Jours disponibles
4. Incidents totaux
5. Incidents en cours
6. Heures sur incidents

Avantages :
âœ… Vision claire de l'historique rÃ©el
âœ… Astreintes planifiÃ©es ne comptent pas avant d'Ãªtre terminÃ©es
âœ… CohÃ©rence : on compte ce qui est effectivement accompli
âœ… Ã‰vite la confusion entre astreintes prÃ©vues et rÃ©alisÃ©es

ğŸ“Š Modification appliquÃ©e : Jours disponibles
Changement implÃ©mentÃ© :
Fonction calculateTotalRecuperation() modifiÃ©e :

Avant : Compte les jours de TOUTES les astreintes (passÃ©es + en cours + futures)
Maintenant : Compte uniquement les jours des astreintes TERMINÃ‰ES (date de fin < date actuelle)

Logique appliquÃ©e :
Total acquis = Î£ jours de rÃ©cupÃ©ration des astreintes oÃ¹ date_fin < date_actuelle
Jours disponibles = Total acquis - Jours pris
```

### **Exemple concret :**

**Aujourd'hui : 16/02/2026**

| Astreinte | Date fin | Type | RÃ©cupÃ©ration | ComptÃ©e ? |
|-----------|----------|------|--------------|-----------|
| Semaine 1 | 08/02/2026 | Normale | 1,5 jours | âœ… Oui (terminÃ©e) |
| Semaine 2 | 15/02/2026 | Week-end | 1,0 jour | âœ… Oui (terminÃ©e hier) |
| Semaine 3 | 22/02/2026 | Normale | 1,5 jours | âŒ Non (en cours) |
| Semaine 4 | 01/03/2026 | Nuit | 0,5 jour | âŒ Non (future) |

**Calcul :**
- Total acquis = 1,5 + 1,0 = **2,5 jours** (seulement les 2 premiÃ¨res)
- Jours pris = 0,5 jour
- **Jours disponibles = 2,0 jours**

### **Impact sur l'interface :**

**Tableau de bord :**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Astreintes terminÃ©es : 2                  â”‚
â”‚ Ã€ venir : 2                               â”‚
â”‚ Jours disponibles : 2,0  â† Mis Ã  jour !  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Onglet RÃ©cupÃ©ration :**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Total acquis : 2,5 jours â† Mis Ã  jour ! â”‚
â”‚ Jours pris : 0,5 jour                   â”‚
â”‚ Disponibles : 2,0 jours â† CohÃ©rent !    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
CohÃ©rence du systÃ¨me :
âœ… Astreintes terminÃ©es = 2
âœ… Jours acquis = issus de ces 2 astreintes terminÃ©es uniquement
âœ… Jours disponibles = calculÃ©s sur la base des astreintes terminÃ©es
âœ… Logique cohÃ©rente : on ne peut pas utiliser des jours d'une astreinte pas encore terminÃ©e
Avantages :
âœ… Ã‰vite de dÃ©clarer des rÃ©cupÃ©rations avant que l'astreinte soit terminÃ©e
âœ… CohÃ©rence totale entre les compteurs
âœ… Vision rÃ©aliste des jours effectivement acquis
âœ… PrÃ©vient les erreurs de comptabilitÃ©

